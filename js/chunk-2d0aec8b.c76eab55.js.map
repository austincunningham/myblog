{"version":3,"sources":["webpack:///./src/markdown/2022/idtokenhint.md?e12e","webpack:///./src/markdown/2022/idtokenhint.md"],"names":["render","_vm","this","_h","$createElement","_self","_c","_m","staticRenderFns","_v","attrs","pre","script","component"],"mappings":"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","file":"js/chunk-2d0aec8b.c76eab55.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',[_c('h1',[_vm._v(\"Keycloak 19.0.1 and Setting the id_token_hint\")]),_c('p',[_vm._v(\"description: id_token_hint and how to set it\")]),_c('p',[_c('img',{attrs:{\"src\":\"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/kd6paztfgofophghmtpy.png\",\"alt\":\"\"}})]),_c('p',[_vm._v(\"Created a blog some time ago setting up \"),_c('a',{attrs:{\"href\":\"https://austincunningham.ddns.net/2022/keycloakexpressoidcg\"}},[_vm._v(\"keycloak express and OIDC client\")]),_vm._v(\" and it happily worked fine with keycloak-17.0.0 and still does. On keycloak-19.0.2 same code completely falls over. (Note to self always set prerequisites on dependencies in blogs).\")]),_c('p',[_vm._v(\"First issue I needed to enable Standard flow for the client in keycloak as I was seeing the following error in the logs\")]),_c('pre',{pre:true},[_c('code',{pre:true,attrs:{\"v-pre\":\"\",\"class\":\"language-bash\"}},[_vm._v(\"2022-09-16 11:56:37,512 WARN  [org.keycloak.events] (executor-thread-0) \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-built_in\"}},[_vm._v(\"type\")]),_vm._v(\"=LOGIN_ERROR, realmId=78ae1441-0616-4745-b021-5ca93fc9f779, clientId=null, userId=null, ipAddress=127.0.0.1, error=invalid_code\\n2022-09-16 11:58:56,673 ERROR [org.keycloak.services] (executor-thread-3) KC-SERVICES0095: Client is not allowed to initiate browser login with given response_type. Standard flow is disabled \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-keyword\"}},[_vm._v(\"for\")]),_vm._v(\" the client.\\n\")])]),_c('p',[_vm._v(\"It's in the \"),_c('code',{pre:true},[_vm._v(\"Clients\\\\Capability config\")]),_vm._v(\" section\")]),_c('p',[_c('img',{attrs:{\"src\":\"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/5ijtn3qf6xrr79eiadey.png\",\"alt\":\"screenshot of keycloak ui clients capability\"}})]),_c('p',[_vm._v(\"Secondly I was using localhost for my uri's in keycloak and in my code base and keycloak-19 did not play well with it. Changed everything to 127.0.0.1 and most routes started working again. With the exception of logout. I was hitting the following issue.\")]),_c('p',[_c('img',{attrs:{\"src\":\"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ph8527vbtx9yef50c9j4.png\",\"alt\":\"keycloak logout id_token_hint error screenshot\"}})]),_c('p',[_vm._v(\"The keycloak logs had a similar error with more details.\")]),_c('pre',{pre:true},[_c('code',{pre:true,attrs:{\"v-pre\":\"\",\"class\":\"language-bash\"}},[_vm._v(\"2022-09-16 13:00:28,208 WARN  [org.keycloak.events] (executor-thread-57) \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-built_in\"}},[_vm._v(\"type\")]),_vm._v(\"=LOGOUT_ERROR, realmId=1bfc6eb7-ffa8-497f-96cc-69840b6c3f39, clientId=null, userId=null, ipAddress=127.0.0.1, error=invalid_request\\n2022-09-16 13:11:48,730 WARN  [org.keycloak.protocol.oidc.endpoints.LogoutEndpoint] (executor-thread-75) Either the parameter \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-string\"}},[_vm._v(\"'client_id'\")]),_vm._v(\" or the parameter \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-string\"}},[_vm._v(\"'id_token_hint'\")]),_vm._v(\" is required when \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-string\"}},[_vm._v(\"'post_logout_redirect_uri'\")]),_vm._v(\" is used.\\n\")])]),_c('p',[_vm._v(\"So because I was using \"),_c('code',{pre:true},[_vm._v(\"post_logout_redirect_uri\")]),_vm._v(\" I need to use either \"),_c('code',{pre:true},[_vm._v(\"client_id\")]),_vm._v(\" or \"),_c('code',{pre:true},[_vm._v(\"id_token_hint\")]),_vm._v(\" parameter. So I had three options\")]),_c('ul',[_c('li',[_vm._v(\"stop using \"),_c('code',{pre:true},[_vm._v(\"post_logout_rediret_uri\")])]),_c('li',[_vm._v(\"add a \"),_c('code',{pre:true},[_vm._v(\"client_id\")]),_vm._v(\" parameter to \"),_c('code',{pre:true},[_vm._v(\"post_logout_redirect_uri\")])]),_c('li',[_vm._v(\"add a \"),_c('code',{pre:true},[_vm._v(\"id_token_hint\")]),_vm._v(\" parameter to \"),_c('code',{pre:true},[_vm._v(\"post_logout_redirect_uri\")])])]),_c('h2',[_vm._v(\"Stop using post_logout_redirect_uri\")]),_c('p',[_vm._v(\"Remove it from the keycloakeIssuer.Client\")]),_c('pre',{pre:true},[_c('code',{pre:true,attrs:{\"v-pre\":\"\",\"class\":\"language-js\"}},[_c('span',{pre:true,attrs:{\"class\":\"hljs-keyword\"}},[_vm._v(\"const\")]),_vm._v(\" keycloakIssuer = \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-keyword\"}},[_vm._v(\"await\")]),_vm._v(\" Issuer.discover(\"),_c('span',{pre:true,attrs:{\"class\":\"hljs-string\"}},[_vm._v(\"\\\"http://127.0.0.1:8080/realms/keycloak-express\\\"\")]),_vm._v(\")\\n\"),_c('span',{pre:true,attrs:{\"class\":\"hljs-comment\"}},[_vm._v(\"// I just comment out the line in the client \")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"hljs-keyword\"}},[_vm._v(\"const\")]),_vm._v(\" client = \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-keyword\"}},[_vm._v(\"new\")]),_vm._v(\" keycloakIssuer.Client({\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-attr\"}},[_vm._v(\"client_id\")]),_vm._v(\": \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-string\"}},[_vm._v(\"'keycloak-express'\")]),_vm._v(\",\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-attr\"}},[_vm._v(\"client_secret\")]),_vm._v(\": \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-string\"}},[_vm._v(\"'long_secret-here'\")]),_vm._v(\",\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-attr\"}},[_vm._v(\"redirect_uris\")]),_vm._v(\": [\"),_c('span',{pre:true,attrs:{\"class\":\"hljs-string\"}},[_vm._v(\"'http://127.0.0.1:3000/auth/callback'\")]),_vm._v(\"],\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-comment\"}},[_vm._v(\"//post_logout_redirect_uris: ['http://127.0.0.1:3000/logout/callback'],\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-attr\"}},[_vm._v(\"response_types\")]),_vm._v(\": [\"),_c('span',{pre:true,attrs:{\"class\":\"hljs-string\"}},[_vm._v(\"'code'\")]),_vm._v(\"],\\n  });\\n\")])]),_c('p',[_vm._v(\"Looks like this it prompts for a logout and leaves you at a keycloak logged out screen.\\n\"),_c('img',{attrs:{\"src\":\"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/7ban9kgffjx05wv4oxxk.gif\",\"alt\":\"screen grab of logout without post_logout_redirect_uri \"}})]),_c('h2',[_vm._v(\"Add client_id parameter\")]),_c('p',[_vm._v(\"We have set the client_id in the \"),_c('code',{pre:true},[_vm._v(\"keycloakeIssuer.Client\")]),_vm._v(\" so it just a matter of setting it in the logout as a parameter\")]),_c('pre',{pre:true},[_c('code',{pre:true,attrs:{\"v-pre\":\"\",\"class\":\"language-js\"}},[_c('span',{pre:true,attrs:{\"class\":\"hljs-comment\"}},[_vm._v(\"// start logout request\")]),_vm._v(\"\\napp.get(\"),_c('span',{pre:true,attrs:{\"class\":\"hljs-string\"}},[_vm._v(\"'/logout'\")]),_vm._v(\", (req, res) => {\\n    res.redirect(client.endSessionUrl({\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-attr\"}},[_vm._v(\"client_id\")]),_vm._v(\": \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-string\"}},[_vm._v(\"\\\"keycloak-express\\\"\")]),_vm._v(\"\\n    }\\n    ));\\n});\\n\")])]),_c('p',[_vm._v(\"Looks like this as you can see it ask for another confirmation before redirecting to the app.\")]),_c('p',[_c('img',{attrs:{\"src\":\"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/dkhredgl17nmk8u3rpxo.gif\",\"alt\":\"screen grab of logout with client_id parameter set\"}})]),_c('h2',[_vm._v(\"Add id_token_hint parameter\")]),_c('p',[_vm._v(\"What is \"),_c('code',{pre:true},[_vm._v(\"id_token_hint\")]),_vm._v(\" and how do I populate it?\\nMe I am terrible at reading/comprehending documentation and much prefer a good example. In this case I didn't find any examples. I found the following documentation referencing \"),_c('code',{pre:true},[_vm._v(\"id_token_hint\")])]),_c('ul',[_c('li',[_c('a',{attrs:{\"href\":\"https://openid.net/specs/openid-connect-rpinitiated-1_0.html\"}},[_vm._v(\"OpenID Connect RP-Initiated Logout \")]),_vm._v(\" which I found too abstract to formulate what to do to generating \"),_c('code',{pre:true},[_vm._v(\"id_token_hint\")]),_vm._v(\" or find it.\")]),_c('li',[_c('a',{attrs:{\"href\":\"https://github.com/panva/node-openid-client/tree/main/docs#clientendsessionurlparameters\"}},[_vm._v(\"the node-oidc-client\")]),_vm._v(\" gave me a hint\")])]),_c('p',[_c('img',{attrs:{\"src\":\"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/zqpdcyj45d10jrxdjj0n.png\",\"alt\":\"Image of the node-oidc-client docs\"}})]),_c('p',[_vm._v(\"There is a tokenSet object that is created as part of the passportjs strategy login flow. I inspected this object and found that it has a \"),_c('code',{pre:true},[_vm._v(\"id_token\")]),_vm._v(\" and I made this \"),_c('code',{pre:true},[_vm._v(\"id_token_hint = id_token\")]),_vm._v(\" and my issue was solved.\")]),_c('p',[_vm._v(\"So I was using passwordjs and node-openid-client\")]),_c('pre',{pre:true},[_c('code',{pre:true,attrs:{\"v-pre\":\"\",\"class\":\"language-js\"}},[_c('span',{pre:true,attrs:{\"class\":\"hljs-keyword\"}},[_vm._v(\"var\")]),_vm._v(\" TokenSet\\npassport.use(\"),_c('span',{pre:true,attrs:{\"class\":\"hljs-string\"}},[_vm._v(\"'oidc'\")]),_vm._v(\", \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-keyword\"}},[_vm._v(\"new\")]),_vm._v(\" Strategy({client}, (tokenSet, userinfo, done)=>{\\n        TokenSet = tokenSet;\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-keyword\"}},[_vm._v(\"return\")]),_vm._v(\" done(\"),_c('span',{pre:true,attrs:{\"class\":\"hljs-literal\"}},[_vm._v(\"null\")]),_vm._v(\", tokenSet.claims());\\n    })\\n)\\n\"),_c('span',{pre:true,attrs:{\"class\":\"hljs-comment\"}},[_vm._v(\"//And on logout we can set the id_token_hint parameter\")]),_vm._v(\"\\napp.get(\"),_c('span',{pre:true,attrs:{\"class\":\"hljs-string\"}},[_vm._v(\"'/logout'\")]),_vm._v(\", (req, res) => {\\n    res.redirect(client.endSessionUrl({\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-attr\"}},[_vm._v(\"id_token_hint\")]),_vm._v(\": TokenSet.id_token\\n    }\\n    ));\\n});\\n\")])]),_c('p',[_vm._v(\"Looks like this and is a much better user experience\")]),_c('p',[_c('img',{attrs:{\"src\":\"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/v6nk3g3bqslzeuv9vnhw.gif\",\"alt\":\"screen grab of logout with id_token_hint parameter set\"}})]),_c('p',[_vm._v(\"Code lives \"),_c('a',{attrs:{\"href\":\"https://github.com/austincunningham/keycloak-express-openid-client/tree/keycloak-19\"}},[_vm._v(\"here\")])])])}]\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./idtokenhint.md?vue&type=template&id=c7c7183c&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}