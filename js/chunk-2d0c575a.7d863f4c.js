(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c575a"],{"3ed6":function(s,e,r){"use strict";r.r(e);var t=function(){var s=this,e=s.$createElement;s._self._c;return s._m(0)},a=[function(){var s=this,e=s.$createElement,r=s._self._c||e;return r("section",[r("h1",[s._v("Building an AI-Powered Log Analyser with RAG")]),r("p",[r("img",{attrs:{src:"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/3fp56eoahz36n32q1uz7.png",alt:"Ollama banner image"}})]),r("p",[s._v("I was looking to build something useful with AI development. I frequently use AI to analyze individual log files, so I thought it would be valuable to create a log analyzer that can process entire directories of log files to identify issues and provide an overall picture of system problems.")]),r("p",[s._v("Traditional approaches fail:")]),r("ul",[r("li",[r("strong",[s._v("grep/awk")]),s._v(": Too rigid, misses context")]),r("li",[r("strong",[s._v("Manual reading")]),s._v(": Impossible with large files or many individual files")]),r("li",[r("strong",[s._v("Basic search")]),s._v(": No understanding of log semantics")])]),r("p",[s._v("I will build a "),r("strong",[s._v("Retrieval-Augmented Generation (RAG)")]),s._v(" system that transforms your log files into an intelligent, queryable knowledge base.")]),r("h2",[s._v("Prerequisites")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-bash"}},[r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("# Install Ollama (for local LLM)")]),s._v("\ncurl -fsSL https://ollama.ai/install.sh | sh\n\n"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("# Pull the Mistral model")]),s._v("\nollama pull mistral\n")])]),r("h3",[s._v("Project Setup")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-bash"}},[r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("# Create project directory")]),s._v("\nmkdir rag_log_analyser\n"),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("cd")]),s._v(" rag_log_analyser\n\n"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("# Create virtual environment")]),s._v("\npython -m venv venv\n"),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("source")]),s._v(" venv/bin/activate  "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("# On Windows: venv\\Scripts\\activate")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("# Install dependencies")]),s._v("\npip install langchain langchain-community langchain-ollama langchain-huggingface chromadb sentence-transformers\n")])]),r("h3",[s._v("Core Architecture")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":""}},[s._v("ðŸ“ rag_log_analyser/\nâ”œâ”€â”€ main.py              # Main application\nâ”œâ”€â”€ utils/\nâ”‚   â””â”€â”€ loaders.py       # Custom log file loader\nâ””â”€â”€ requirements.txt     # Dependencies\n")])]),r("h3",[s._v("Custom Log Loader ("),r("code",{pre:!0},[s._v("utils/loaders.py")]),s._v(")")]),r("p",[s._v("The idea here is treating each log line as an individual document. Let's break down exactly what each part does:")]),r("h4",[r("strong",[s._v("Set the Type of Files to Find")])]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-python"}},[r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("def")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("load_sop_files")]),r("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("(directory: str)")]),s._v(":")]),s._v("\n    allowed_exts = ("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'.log'")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'.txt'")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'.out'")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'.err'")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'.access'")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'.csv'")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'.json'")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'.yaml'")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'.yml'")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'.md'")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'.asciidoc'")]),s._v(")\n    \n    docs = []\n    file_count = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("\n    total_lines = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("\n")])]),r("ul",[r("li",[s._v("Defines supported file extensions (covers most log formats)")]),r("li",[s._v("Initializes tracking variables for progress reporting")]),r("li",[s._v("Creates empty list to store document objects")])]),r("h4",[r("strong",[s._v("Processing Files Line by Line")])]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-python"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" root, _, files "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("in")]),s._v(" os.walk(directory):\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" file "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("in")]),s._v(" files:\n        file_lower = file.lower()\n        "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" file_lower.endswith(allowed_exts):\n            path = os.path.join(root, file)\n            file_count += "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("\n            print("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('f"Processing file '),r("span",{pre:!0,attrs:{class:"hljs-subst"}},[s._v("{file_count}")]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-subst"}},[s._v("{file}")]),s._v('"')]),s._v(")\n            \n            "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("try")]),s._v(":\n                "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("with")]),s._v(" open(path, "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'r'")]),s._v(", encoding="),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'utf-8'")]),s._v(") "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("as")]),s._v(" f:\n                    line_count = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("\n                    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" i, line "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("in")]),s._v(" enumerate(f):\n                        "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" line.strip():  "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("# Skip empty lines")]),s._v("\n                            docs.append({\n                                "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"page_content"')]),s._v(": line.strip(),\n                                "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"metadata"')]),s._v(": {"),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"source"')]),s._v(": path, "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"line_number"')]),s._v(": i + "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("}\n                            })\n                            line_count += "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("\n                            total_lines += "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("\n                            \n                            "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("# Show progress for large files")]),s._v("\n                            "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" line_count % "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("10000")]),s._v(" == "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(":\n                                print("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('f"   Processed '),r("span",{pre:!0,attrs:{class:"hljs-subst"}},[s._v("{line_count:,}")]),s._v(' lines..."')]),s._v(")\n                    \n                    print("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('f"   Completed: '),r("span",{pre:!0,attrs:{class:"hljs-subst"}},[s._v("{line_count:,}")]),s._v(' lines processed"')]),s._v(")\n            "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("except")]),s._v(" Exception "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("as")]),s._v(" e:\n                print("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('f"Error loading '),r("span",{pre:!0,attrs:{class:"hljs-subst"}},[s._v("{path}")]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-subst"}},[s._v("{e}")]),s._v('"')]),s._v(")\n\nprint("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('f"Summary: Processed '),r("span",{pre:!0,attrs:{class:"hljs-subst"}},[s._v("{file_count}")]),s._v(" files, "),r("span",{pre:!0,attrs:{class:"hljs-subst"}},[s._v("{total_lines:,}")]),s._v(' total log entries"')]),s._v(")\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" [Document(**d) "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" d "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("in")]),s._v(" docs]\n")])]),r("p",[s._v("This function does several important things:")]),r("ul",[r("li",[r("strong",[s._v("Finds all log files")]),s._v(": The "),r("code",{pre:!0},[s._v("os.walk(directory)")]),s._v(" function recursively searches through directories, while "),r("code",{pre:!0},[s._v("file_lower.endswith(allowed_exts)")]),s._v(" filters files by extension using case-insensitive matching")]),r("li",[r("strong",[s._v("Processes each line separately")]),s._v(": The "),r("code",{pre:!0},[s._v("for i, line in enumerate(f)")]),s._v(" loop treats every non-empty line as its own document using "),r("code",{pre:!0},[s._v("if line.strip()")])]),r("li",[r("strong",[s._v("Tracks metadata")]),s._v(": Each line gets stored with "),r("code",{pre:!0},[s._v('{"source": path, "line_number": i + 1}')]),s._v(" metadata, making it easy to trace back to the original file location")]),r("li",[r("strong",[s._v("Shows progress")]),s._v(": The "),r("code",{pre:!0},[s._v("if line_count % 10000 == 0")]),s._v(" condition displays progress every 10,000 lines with "),r("code",{pre:!0},[s._v('print(f"ðŸ“Š Processed {line_count:,} lines...")')]),s._v(" so you know it's working on large files")]),r("li",[r("strong",[s._v("Handles errors gracefully")]),s._v(": The "),r("code",{pre:!0},[s._v("try/except")]),s._v(" block catches file reading errors with "),r("code",{pre:!0},[s._v("except Exception as e")]),s._v(" and logs them while continuing with other files")]),r("li",[r("strong",[s._v("Returns LangChain documents")]),s._v(": The final "),r("code",{pre:!0},[s._v("return [Document(**d) for d in docs]")]),s._v(" converts our dictionary format into LangChain Document objects needed for embedding and vector storage")])]),r("h3",[s._v("Main Application ("),r("code",{pre:!0},[s._v("main.py")]),s._v(")")]),r("p",[s._v("Let's break down the main application into logical sections:")]),r("h4",[r("strong",[s._v("Imports & Dependencies")])]),r("p",[s._v("The imports")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-python"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("import")]),s._v(" warnings\nwarnings.filterwarnings("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"ignore"')]),s._v(", category=DeprecationWarning)\n\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("from")]),s._v(" utils.loaders "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("import")]),s._v(" load_sop_files\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("from")]),s._v(" langchain_community.embeddings "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("import")]),s._v(" HuggingFaceEmbeddings\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("from")]),s._v(" langchain_community.vectorstores "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("import")]),s._v(" Chroma\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("from")]),s._v(" langchain.chains "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("import")]),s._v(" RetrievalQA\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("from")]),s._v(" langchain_ollama "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("import")]),s._v(" OllamaLLM\n")])]),r("h4",[r("strong",[s._v("Directory Input & Validation")])]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-python"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("try")]),s._v(":\n    LOG_DIRECTORY = input("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"-> Please enter the full path to the log directory: "')]),s._v(")\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("not")]),s._v(" os.path.isdir(LOG_DIRECTORY):\n        print("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("f\"Error: Directory not found at '"),r("span",{pre:!0,attrs:{class:"hljs-subst"}},[s._v("{LOG_DIRECTORY}")]),s._v("'\"")]),s._v(")\n        sys.exit("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(")\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("except")]),s._v(" KeyboardInterrupt:\n    print("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"\\n\\nExiting..."')]),s._v(")\n    sys.exit("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(")\n")])]),r("ul",[r("li",[s._v("Prompts user for log directory path")]),r("li",[s._v("Validates directory exists before processing")]),r("li",[r("strong",[s._v("Keyboard interrupt handling")]),s._v(": Graceful exit with Ctrl+C")]),r("li",[s._v("User-friendly error messages")])]),r("h4",[r("strong",[s._v("Document Loading & Processing")])]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-python"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("try")]),s._v(":\n    print("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('f"Loading log files from: '),r("span",{pre:!0,attrs:{class:"hljs-subst"}},[s._v("{LOG_DIRECTORY}")]),s._v('..."')]),s._v(")\n    docs = load_sop_files(LOG_DIRECTORY)\n    print("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('f"Loaded '),r("span",{pre:!0,attrs:{class:"hljs-subst"}},[s._v("{len(docs)}")]),s._v(' log entries from files"')]),s._v(")\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("except")]),s._v(" KeyboardInterrupt:\n    print("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"\\n\\nFile loading interrupted by user. Exiting ..."')]),s._v(")\n    sys.exit("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(")\n")])]),r("ul",[r("li",[s._v("Calls our custom loader to process all log files")]),r("li",[s._v("Shows progress during file processing")]),r("li",[s._v("Reports total number of log entries found")])]),r("h4",[r("strong",[s._v("Vector Database Creation (The Heavy Lifting)")])]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-python"}},[s._v("print("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('f"Creating vector database with '),r("span",{pre:!0,attrs:{class:"hljs-subst"}},[s._v("{len(chunks)}")]),s._v(' log entries..."')]),s._v(")\nprint("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"This may take several minutes for large files..."')]),s._v(")\n\n"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("# Check if database already exists")]),s._v("\ndb_path = "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"./chroma_db"')]),s._v("\ndb_exists = os.path.exists(db_path)\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" db_exists:\n    rebuild_choice = input("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Vector database already exists. Rebuild? (y/n): "')]),s._v(")\n\n"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("# Optimized embedding settings")]),s._v("\nembeddings = HuggingFaceEmbeddings(\n    model_name="),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"sentence-transformers/all-MiniLM-L6-v2"')]),s._v(",\n    model_kwargs={"),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'device'")]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'cpu'")]),s._v("},\n    encode_kwargs={"),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'normalize_embeddings'")]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("True")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'batch_size'")]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("32")]),s._v("}\n)\n\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" db_exists "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("and")]),s._v(" rebuild_choice != "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'y'")]),s._v(":\n    print("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Found existing vector database, loading..."')]),s._v(")\n    db = Chroma(persist_directory=db_path, embedding_function=embeddings)\n    print("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Vector database loaded successfully"')]),s._v(")\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(":\n    print("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Creating new vector database..."')]),s._v(")\n    db = Chroma.from_documents(\n        chunks, embeddings,\n        persist_directory=db_path,\n        collection_metadata={"),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"hnsw:space"')]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"cosine"')]),s._v("}\n    )\n    print("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Vector database created and saved"')]),s._v(")\n")])]),r("ul",[r("li",[r("strong",[s._v("Persistent Storage")]),s._v(": Database saved to "),r("code",{pre:!0},[s._v("./chroma_db/")]),s._v(" for reuse")]),r("li",[r("strong",[s._v("Optimized Embeddings")]),s._v(": Fast model with batch processing (32 items/batch)")]),r("li",[r("strong",[s._v("Smart Loading")]),s._v(": Reuses existing database unless rebuild requested")]),r("li",[r("strong",[s._v("This is the bottleneck")]),s._v(": Large files take time on first run only")])]),r("h4",[r("strong",[s._v("RAG Chain Setup")])]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-python"}},[s._v("retriever = db.as_retriever()\nllm = OllamaLLM(model="),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"mistral"')]),s._v(")\nqa = RetrievalQA.from_chain_type(llm=llm, retriever=retriever, return_source_documents="),r("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("True")]),s._v(")\n")])]),r("ul",[r("li",[r("strong",[s._v("Retriever")]),s._v(": Finds most relevant log entries for each query")]),r("li",[r("strong",[s._v("LLM")]),s._v(": Mistral model for generating intelligent responses")]),r("li",[r("strong",[s._v("RAG Chain")]),s._v(": Combines retrieval + generation for contextual answers")]),r("li",[r("strong",[s._v("Source Documents")]),s._v(": Returns original log entries for verification")])]),r("h4",[r("strong",[s._v("Interactive Query Loop & Prompt Engineering")])]),r("p",[s._v("Loop for handling queries and prompt engineering")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-python"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("try")]),s._v(":\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("while")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("True")]),s._v(":\n        query = input("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("\"\\nYou (e.g., 'What errors occurred in the last hour?'): \"")]),s._v(")\n        "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" query.lower() "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("in")]),s._v(" ("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"exit"')]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"quit"')]),s._v("):\n            print("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Exiting..."')]),s._v(")\n            "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("break")]),s._v("\n        \n        "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("# LLM prompt engineering This is what give the LLM it's context to formulate it's response")]),s._v("\n        analysis_query = (\n            "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"You are an expert log analyser. Review the provided log entries and answer the user\'s question. "')]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Provide a concise summary, highlight any potential issues, and mention the relevant source log files. "')]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('f"Question: '),r("span",{pre:!0,attrs:{class:"hljs-subst"}},[s._v("{query}")]),s._v('"')]),s._v("\n        )\n\n        "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("try")]),s._v(":\n            result = qa.invoke({"),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"query"')]),s._v(": analysis_query})\n            "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("# ... display results ...")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("except")]),s._v(" KeyboardInterrupt:\n            print("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"\\n Query processing interrupted. You can ask another question."')]),s._v(")\n            "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("continue")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("except")]),s._v(" KeyboardInterrupt:\n    print("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"\\n\\nGoodbye! Exiting..."')]),s._v(")\n    sys.exit("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(")\n")])]),r("h4",[r("strong",[s._v("Response Display & Source Attribution")])]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-python"}},[s._v("print("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"\\nAssistant:\\n"')]),s._v(", result["),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"result"')]),s._v("])\n\nprint("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"\\nSources:"')]),s._v(")\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" doc "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("in")]),s._v(" result["),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"source_documents"')]),s._v("]:\n    source = doc.metadata.get("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'source'")]),s._v(")\n    line_number = doc.metadata.get("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'line_number'")]),s._v(")\n    print("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('f" - '),r("span",{pre:!0,attrs:{class:"hljs-subst"}},[s._v("{source}")]),r("span",{pre:!0,attrs:{class:"hljs-subst"}},[s._v("{"),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("f' (Line "),r("span",{pre:!0,attrs:{class:"hljs-subst"}},[s._v("{line_number}")]),s._v(")'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" line_number "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("''")]),s._v("}")]),s._v('"')]),s._v(")\n")])]),r("ul",[r("li",[s._v("Displays AI-generated analysis")]),r("li",[s._v("Shows source files and line numbers for verification")]),r("li",[s._v("Enables traceability back to original log entries")])]),r("h2",[s._v("How It Works")]),r("p",[s._v("You start Ollama")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-bash"}},[s._v("ollama run mistral\n")])]),r("p",[s._v("In a seperate window start the log analyser and")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":""}},[s._v("python main.py\nStarting script...\n_______________________________________________________________________________\n _ __ __ _  __ _    | | ___   __ _      __ _ _ __   __ _| |_   _ ___  ___ _ __\n| '__/ _` |/ _` |___| |/ _ \\ / _` |___ / _` | '_ \\ / _` | | | | / __|/ _ | '__|\n| | | (_| | (_| |___| | (_) | (_| |___| (_| | | | | (_| | | |_| \\__ |  __| |\n|_|  \\__,_|\\__, |   |_|\\___/ \\__, |    \\__,_|_| |_|\\__,_|_|\\__, |___/\\___|_|\n           |___/              |___/                         |___/\n_______________________________________________________________________________\n                                                                                        \n                                                                                          \n                                                                                          \n-> Please enter the full path to the log directory (e.g., /home/user/support/):\n")])]),r("p",[s._v("Pass in the full directory to the log files you wish to query")]),r("h3",[r("strong",[s._v("Step 1: Document Processing")])]),r("p",[s._v("The log file will get processed output will look similar to below")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-bash"}},[s._v("Processing file 1: application.log\n   Processed 10,000 lines...\n   Processed 20,000 lines...\n   Completed: 45,123 lines processed\nSummary: Processed 1 files, 45,123 total "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("log")]),s._v(" entries\n")])]),r("p",[r("strong",[s._v("What happens:")])]),r("ul",[r("li",[s._v("Each log line becomes a separate document")]),r("li",[s._v("Metadata tracks source file and line number")]),r("li",[s._v("Progress tracking for large files")])]),r("h4",[r("strong",[s._v("Step 2: Vector Database Creation")])]),r("p",[s._v("Next the database is created.")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-bash"}},[s._v("Creating vector database with 45,123 "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("log")]),s._v(" entries...\nThis may take several minutes "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" large files...\nVector database already exists. Rebuild? (y/n): y\nUsing optimized embedding model "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" faster processing...\nGenerating embeddings...\nVector database created successfully\n")])]),r("p",[r("strong",[s._v("What happens:")])]),r("ul",[r("li",[s._v('Each log line gets converted into a unique numerical "fingerprint" (384 numbers)')]),r("li",[s._v("Vectors stored in ChromaDB for fast retrieval")]),r("li",[s._v("This can take a while")])]),r("blockquote",[r("p",[r("strong",[s._v("NOTE:")]),s._v(" if you have built the vector DB already you have an opt out here so you can use an existing DB rather than rebuilding each time.")])]),r("p",[s._v("Once the vector database is successfully built, you can query the LLM to get answers based on the loaded log files.")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-bash"}},[s._v("Vector database loaded successfully\nLog Analyser Assistant ready. Type your question below. Type "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'exit'")]),s._v(" to quit.\n\nYou (e.g., "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'What errors occurred in the last hour?'")]),s._v("): \n")])]),r("p",[s._v("Sample response")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-bash"}},[s._v("Log Analyser Assistant ready. Type your question below.\n\nYou: What errors occurred "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("in")]),s._v(" the last hour?\n\nAssistant:\nBased on the "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("log")]),s._v(" entries, I found several errors "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("in")]),s._v(" the last hour:\n\n1. **Database Connection Error** (2 occurrences)\n   - Time: 14:23:15, 14:45:22\n   - Error: "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Connection timeout to database server"')]),s._v("\n   - Severity: CRITICAL\n\n2. **Authentication Failure** (5 occurrences)\n   - Time: 14:12:33, 14:18:45, 14:25:12, 14:31:56, 14:42:18\n   - Error: "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Invalid credentials for user admin"')]),s._v("\n   - Severity: WARNING\n\nSources:\n - /var/"),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("log")]),s._v("/application.log (Line 1247)\n - /var/"),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("log")]),s._v("/application.log (Line 1253)\n - /var/"),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("log")]),s._v("/application.log (Line 1289)\n")])]),r("p",[s._v("Code lives here "),r("a",{attrs:{href:"https://github.com/austincunningham/rag_log_analyser"}},[s._v("https://github.com/austincunningham/rag_log_analyser")])])])}],n=r("2877"),l={},_=Object(n["a"])(l,t,a,!1,null,null,null);e["default"]=_.exports}}]);
//# sourceMappingURL=chunk-2d0c575a.7d863f4c.js.map